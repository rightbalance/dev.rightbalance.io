import{_ as $}from"./client-only.7ItIu17b.js";import{_ as G}from"./nuxt-img.0mtxf625.js";import{v as d,x as B,f as x,y as R,E,o as b,c as k,a as l,b as f,w as S,A as C,C as P,h as a,j as I,n as V,_ as L,G as U,i as q}from"./entry.tv-oavRR.js";import{u as r}from"./assets.AVVN1XRm.js";const N=()=>{const p=d();return B(()=>{const n=document.createElement("video");p.value=!!n.canPlayType("video/webm")}),{isIos:["iPhone","iPad"].includes((navigator||{}).platform),canPlayWebm:p}},H={class:"unset"},J=["autoplay","loop","poster"],K=["src"],Q=["src"],X=["src"],Y=["poster"],Z=["src"],ee=["src"],oe=["src"],ae=x({__name:"video",props:{name:{default:""},loopPart:{default:""},mobileFallback:{type:Boolean,default:!1},loop:{type:Boolean,default:!1},playOnScroll:{type:Boolean,default:!1}},setup(p){const t=p,n=d(null),o=d(null),v=d(!1),m=d(!1),h=d(!1),y={muted:!0,playsinline:!0,preload:"auto","webkit-playsinline":!0},w=["diamond","head","box","plexus"],_=t.name.replace("-intro",""),O={callback:W,once:!0,intersection:{threshold:.5}},{canPlayWebm:T,isIos:D}=N(),F=w.includes(_);async function W(e){var c,u;console.log("isVisible",e,t.name);const{playOnScroll:s,loopPart:i}=t;h&&(s&&e||!s)&&(await((c=n.value)==null?void 0:c.play()),i&&await((u=o.value)==null?void 0:u.play()))}function A(){o.value&&o.value.pause&&(o.value.pause(),o.value.currentTime=0)}function M(e){const{y:s}=e.getBoundingClientRect();return s>=-100&&s<=100}async function g(){document.visibilityState==="visible"&&[n,o].forEach(s=>{var i;s.value&&M(s.value)&&((i=s.value)==null||i.play())})}B(async()=>{var s,i,c,u;const{loopPart:e}=t;D&&t.playOnScroll&&h&&(await((s=n.value)==null?void 0:s.play()),(i=n.value)==null||i.pause(),e&&(await((c=o.value)==null?void 0:c.play()),await((u=o.value)==null?void 0:u.pause()))),document.addEventListener("visibilitychange",g,!1)}),R(()=>{document.removeEventListener("visibilitychange",g)});async function j(){var e;t.loopPart&&o.value&&(o.value.currentTime=0,await((e=o.value)==null?void 0:e.play()),v.value=!0)}function z(){m.value=!0}return(e,s)=>{const i=$,c=G,u=E("observe-visibility");return b(),k("div",{class:V({wrap:!0,"fill-space":!a(T),"has-mobile-playback":a(F)})},[l("div",H,[f(i,null,{default:S(()=>[C(l("div",null,null,512),[[u,O]])]),_:1}),l("video",P({ref_key:"player",ref:n},y,{autoplay:!t.playOnScroll,loop:t.loop&&!t.loopPart,style:{opacity:v.value?"0":"1"},onEnded:j,onCanplay:z,poster:a(r)(`/video-posters/${e.name}.png`)}),[l("source",{src:a(r)(`videos/${e.name}.webm`),type:"video/webm"},null,8,K),l("source",{src:a(r)(`videos/mobile/fallback/${e.name}.webm`),type:"video/mp4",media:"(max-width: 768px)"},null,8,Q),l("source",{src:a(r)(`videos/fallback/${e.name}.webm`),type:"video/mp4",media:"(min-width: 768px)"},null,8,X),f(c,{src:`/video-posters/${a(_)}.png`,alt:`${a(_)} background image`},null,8,["src","alt"])],16,J),e.loopPart?(b(),k("video",P({key:0,ref_key:"playerLoop",ref:o},y,{loop:!0,style:{transform:v.value?"":"scale(0)"},poster:a(r)(`/video-posters/${a(_)}.png`),onLoadedmetadata:A}),[l("source",{src:a(r)(`videos/${e.loopPart}.webm`),type:"video/webm"},null,8,Z),l("source",{src:a(r)(`videos/mobile/fallback/${e.loopPart}.webm`),type:"video/mp4",media:"(max-width: 768px)"},null,8,ee),l("source",{src:a(r)(`videos/fallback/${e.loopPart}.webm`),type:"video/mp4",media:"(min-width: 768px)"},null,8,oe),f(c,{src:`/video-posters/${a(_)}.png`,alt:`${e.loopPart} background image`},null,8,["src","alt"])],16,Y)):I("",!0)])],2)}}}),se=L(ae,[["__scopeId","data-v-76cf58b1"]]),te={class:"content"},le={class:"observer"},ne=x({__name:"slide",props:{backgroundVideo:Boolean},setup(p){const t=N();function n(m){o.value=m}let o=d(!1);const v={callback:n,once:!t,intersection:{threshold:.3}};return(m,h)=>{const y=$,w=E("observe-visibility");return b(),k("section",{class:V({slide:!0,visible:a(o)})},[l("div",te,[U(m.$slots,"default",{},void 0,!0),f(y,null,{default:S(()=>[C(l("div",le,null,512),[[w,v]])]),_:1})]),p.backgroundVideo?(b(),q(se,{key:0,name:"plexus",class:"bg-video",loop:!0,"mobile-fallback":!0})):I("",!0)],2)}}}),de=L(ne,[["__scopeId","data-v-3e95ef38"]]);export{de as _,se as a,N as u};
